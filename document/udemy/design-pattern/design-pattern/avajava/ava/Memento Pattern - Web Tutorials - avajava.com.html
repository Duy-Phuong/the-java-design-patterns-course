<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- saved from url=(0062)https://www.avajava.com/tutorials/lessons/memento-pattern.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>Memento Pattern - Web Tutorials - avajava.com</title>
<meta name="keywords" content="Java, memento pattern, design pattern, behavioral pattern">
<meta name="description" content="This Java tutorial describes the memento pattern, a behavioral object pattern.">
<link href="./Memento Pattern - Web Tutorials - avajava.com_files/default.css" rel="stylesheet" type="text/css">
<link href="./Memento Pattern - Web Tutorials - avajava.com_files/codeformat.css" rel="stylesheet" type="text/css">
<link rel="shortcut icon" href="http://www.avajava.com/favicon.ico" type="image/vnd.microsoft.icon"> 
<link rel="icon" href="http://www.avajava.com/favicon.ico" type="image/vnd.microsoft.icon"> 
</head>
<body>
<div id="outer">
	<div id="header">
		<h1>
		<a href="https://www.avajava.com/tutorials">
		AVAJAVA Web Tutorials</a>
		</h1>
		
		<h2 id="firsth2">
			Total Categories: 24,
			Total Tutorials: 508</h2>
	
			<h2 id="secondh2">
				Design Patterns:
				22 of
				22 tutorials
				</h2>
				<h2 id="thirdh2">
				Memento Pattern</h2>
			</div>
	<div id="menu">
		<ul>
<!-- 
		<li class="first">"Java forwards and backwards"</li>
 --> 
<!-- 		<li><a class="toptext" href="http://www.jarvana.com/" title="Search Maven Repository">Maven Repository Search</a></li>
		<li><a class="toptext" href="http://www.jarvana.com/jarvana/doc" title="Search for Javadocs Classes and Projects">Javadoc Search</a></li> -->			

		</ul>
		<div id="search">
		Search Tutorials:
		<form style="display: inline" action="https://www.avajava.com/tutorials/search" method="get" name="searchForm">
		<input style="margin-bottom: 2px;" type="text" size="20" maxlength="50" name="q" value="">
		<input id="searchbutton" type="submit" value="  Go  ">
		</form>
		</div>
		<div class="clear"></div>
	</div>
	<div id="topbreadcrumb">
<div class="breadcrumbouter">
<div class="breadcrumbinner">
<a title="Go to Categories Index" href="https://www.avajava.com/tutorials/">Web Tutorials</a>
::
<a title="Go to previous category: &#39;Database&#39;" href="https://www.avajava.com/tutorials/categories/database"><img alt="Go to previous category" style="display: inline; border: 0px;" src="./Memento Pattern - Web Tutorials - avajava.com_files/previous.gif"></a>&nbsp;<a title="Go to &#39;Design Patterns&#39; category" href="https://www.avajava.com/tutorials/categories/design-patterns">Design Patterns</a>&nbsp;<a title="Go to next category: &#39;Eclipse&#39;" href="https://www.avajava.com/tutorials/categories/eclipse"><img alt="Go to next category" style="display: inline; border: 0px;" src="./Memento Pattern - Web Tutorials - avajava.com_files/next.gif"></a>


::
Behavioral Design Patterns

::
<a title="Go to previous tutorial in &#39;Design Patterns&#39; category: &#39;Iterator Pattern&#39;" href="https://www.avajava.com/tutorials/lessons/iterator-pattern.html"><img alt="Go to previous tutorial" style="display: inline; border: 0px;" src="./Memento Pattern - Web Tutorials - avajava.com_files/previous.gif"></a>&nbsp;22.
Memento Pattern&nbsp;<a title="Go to next tutorial in &#39;Design Patterns&#39; category: &#39;Singleton Pattern&#39;" href="https://www.avajava.com/tutorials/lessons/singleton-pattern.html"><img alt="Go to next tutorial" style="display: inline; border: 0px;" src="./Memento Pattern - Web Tutorials - avajava.com_files/next.gif"></a>

</div>
</div>

</div>

<div id="content">
		<div id="primaryContentContainer">
			<div id="primaryContent">
<table width="100%">
	<tbody><tr>
		<td id="sidemenu">
		<div id="sidemenucats"><strong>Tutorial Categories:</strong> <ol><li><a href="https://www.avajava.com/tutorials/categories/ajax">Ajax</a> (1)</li><li><a href="https://www.avajava.com/tutorials/categories/ant">Ant</a> (16)</li><li><a href="https://www.avajava.com/tutorials/categories/apache-web-server">Apache Web Server</a> (8)</li><li><a href="https://www.avajava.com/tutorials/categories/bioinformatics">Bioinformatics</a> (10)</li><li><a href="https://www.avajava.com/tutorials/categories/cascading-style-sheets">Cascading Style Sheets</a> (47)</li><li><a href="https://www.avajava.com/tutorials/categories/classes-and-objects">Classes and Objects</a> (14)</li><li><a href="https://www.avajava.com/tutorials/categories/database">Database</a> (13)</li><li><a class="currentcategory" href="https://www.avajava.com/tutorials/categories/design-patterns">Design Patterns</a> (22)</li><li><a href="https://www.avajava.com/tutorials/categories/eclipse">Eclipse</a> (39)</li><li><a href="https://www.avajava.com/tutorials/categories/files">Files</a> (62)</li><li><a href="https://www.avajava.com/tutorials/categories/general-java">General Java</a> (69)</li><li><a href="https://www.avajava.com/tutorials/categories/jsps">JSPs</a> (9)</li><li><a href="https://www.avajava.com/tutorials/categories/java-basics">Java Basics</a> (11)</li><li><a href="https://www.avajava.com/tutorials/categories/linux">Linux</a> (23)</li><li><a href="https://www.avajava.com/tutorials/categories/logging">Logging</a> (5)</li><li><a href="https://www.avajava.com/tutorials/categories/maven">Maven</a> (88)</li><li><a href="https://www.avajava.com/tutorials/categories/search">Search</a> (12)</li><li><a href="https://www.avajava.com/tutorials/categories/servlets">Servlets</a> (20)</li><li><a href="https://www.avajava.com/tutorials/categories/struts">Struts</a> (1)</li><li><a href="https://www.avajava.com/tutorials/categories/text">Text</a> (19)</li><li><a href="https://www.avajava.com/tutorials/categories/tomcat">Tomcat</a> (8)</li><li><a href="https://www.avajava.com/tutorials/categories/version-control">Version Control</a> (8)</li><li><a href="https://www.avajava.com/tutorials/categories/windows">Windows</a> (2)</li><li><a href="https://www.avajava.com/tutorials/categories/xml">XML</a> (1)</li></ol><!-- Google Ads is off  -->
			<!-- Amazon Ads is off  -->
			</div>
		</td>

		<td id="mainside"><!-- Google Ads is off  -->
<hr>
<div class="accentuate">
<div class="title">Memento Pattern</div>
<div>Author: Deron Eriksson</div>
<div class="smaller">Description: This Java tutorial describes the memento pattern, a behavioral object pattern.</div>
<div class="smaller">
Tutorial created using:
Windows Vista || JDK 1.6.0_11 || Eclipse JEE Ganymede SR1 (Eclipse 3.4.1)</div>
</div>
<hr>
<br>

<div style="font-weight: bold">Page: &nbsp;&nbsp; 1 <a href="https://www.avajava.com/tutorials/lessons/memento-pattern.html?page=2" title="Go to page 2">2</a>&nbsp;<a href="https://www.avajava.com/tutorials/lessons/memento-pattern.html?page=2" title="Go to page 2">&gt;</a></div><br>
<p>The memento pattern is a behavioral design pattern. The memento pattern is used to store an object's state so that this state can be restored at a later point. The saved state data in the memento object is not accessible outside of the object to be saved and restored. This protects the integrity of the saved state data. </p>

<p>In this pattern, an Originator class represents the object whose state we would like to save. A Memento class represents an object to store the state of the Originator. The Memento class is typically a private inner class of the Originator. As a result, the Originator has access to the fields of the memento, but outside classes do not have access to these fields. This means that state information can be transferred between the Memento and the Originator within the Originator class, but outside classes do not have access to the state data stored in the Memento. </p>

<p>The memento pattern also utilizes a Caretaker class. This is the object that is responsible for storing and restoring the Originator's state via a Memento object. Since the Memento is a private inner class, the Memento class type is not visible to the Caretaker. As a result, the Memento object needs to be stored as an Object within the Caretaker. </p>

<hr>

<p>Now, let's look at an example. The DietInfo class is our Originator class. We'd like to be able to save and restore its state. It contains 3 fields: a dieter name field, the day number of the diet, and the weight of the dieter on the specified day of the diet. </p>

<p>This class contains a private inner class called Memento. This is our Memento class that is used to save the state of DietInfo. Memento has 3 fields representing the dieter name, the day number, and the weight of the dieter. </p>

<p>Notice the save() method of DietInfo. This creates and returns a Memento object. This returned Memento object gets stored by the caretaker. Note that DietInfo.Memento is not visible, so the caretaker can't reference DietInfo.Memento. Instead, it stores the reference as an Object. </p>

<p>The restore() method of DietInfo is used to restore the state of the DietInfo. The caretaker passes in the Memento (as an Object). The memento is cast to a Memento object and then the DietInfo object's state is restored by copying over the values from the memento. </p>

<h3><a href="https://www.avajava.com/tutorials/design-patterns/memento-pattern/DietInfo.java">DietInfo.java</a></h3>
<pre><span class="javaKeyword">package</span> com.cakes;

<span class="javaSComment">// originator - object whose state we want to save</span>
<span class="javaKeyword">public</span> <span class="javaKeyword">class</span> DietInfo {

	String personName;
	<span class="javaKeyword">int</span> dayNumber;
	<span class="javaKeyword">int</span> weight;

	<span class="javaKeyword">public</span> DietInfo(String personName, <span class="javaKeyword">int</span> dayNumber, <span class="javaKeyword">int</span> weight) {
		<span class="javaKeyword">this</span>.personName = personName;
		<span class="javaKeyword">this</span>.dayNumber = dayNumber;
		<span class="javaKeyword">this</span>.weight = weight;
	}

	<span class="javaKeyword">public</span> String toString() {
		<span class="javaKeyword">return</span> <span class="javaString">"Name: "</span> + personName + <span class="javaString">", day number: "</span> + dayNumber + <span class="javaString">", weight: "</span> + weight;
	}

	<span class="javaKeyword">public</span> <span class="javaKeyword">void</span> setDayNumberAndWeight(<span class="javaKeyword">int</span> dayNumber, <span class="javaKeyword">int</span> weight) {
		<span class="javaKeyword">this</span>.dayNumber = dayNumber;
		<span class="javaKeyword">this</span>.weight = weight;
	}

	<span class="javaKeyword">public</span> Memento save() {
		<span class="javaKeyword">return</span> <span class="javaKeyword">new</span> Memento(personName, dayNumber, weight);
	}

	<span class="javaKeyword">public</span> <span class="javaKeyword">void</span> restore(Object objMemento) {
		Memento memento = (Memento) objMemento;
		personName = memento.mementoPersonName;
		dayNumber = memento.mementoDayNumber;
		weight = memento.mementoWeight;
	}

	<span class="javaSComment">// memento - object that stores the saved state of the originator</span>
	<span class="javaKeyword">private</span> <span class="javaKeyword">class</span> Memento {
		String mementoPersonName;
		<span class="javaKeyword">int</span> mementoDayNumber;
		<span class="javaKeyword">int</span> mementoWeight;

		<span class="javaKeyword">public</span> Memento(String personName, <span class="javaKeyword">int</span> dayNumber, <span class="javaKeyword">int</span> weight) {
			mementoPersonName = personName;
			mementoDayNumber = dayNumber;
			mementoWeight = weight;
		}
	}
}
</pre>
<p>DietInfoCaretaker is the caretaker class that is used to store the state (ie, the memento) of a DietInfo object (ie, the originator). The memento is stored as an object since DietInfo.Memento is not visible to the caretaker. This protects the integrity of the data stored in the Memento object. The caretaker's saveState() method saves the state of the DietInfo object. The caretaker's restoreState() method restores the state of the DietInfo object. </p>

<h3><a href="https://www.avajava.com/tutorials/design-patterns/memento-pattern/DietInfoCaretaker.java">DietInfoCaretaker.java</a></h3>
<pre><span class="javaKeyword">package</span> com.cakes;

<span class="javaSComment">// caretaker - saves and restores a DietInfo object's state via a memento</span>
<span class="javaSComment">// note that DietInfo.Memento isn't visible to the caretaker so we need to cast the memento to Object</span>
<span class="javaKeyword">public</span> <span class="javaKeyword">class</span> DietInfoCaretaker {

	Object objMemento;

	<span class="javaKeyword">public</span> <span class="javaKeyword">void</span> saveState(DietInfo dietInfo) {
		objMemento = dietInfo.save();
	}

	<span class="javaKeyword">public</span> <span class="javaKeyword">void</span> restoreState(DietInfo dietInfo) {
		dietInfo.restore(objMemento);
	}

}
</pre>

<p class="continue">(Continued on page 2)</p><div style="font-weight: bold">Page: &nbsp;&nbsp; 1 <a href="https://www.avajava.com/tutorials/lessons/memento-pattern.html?page=2" title="Go to page 2">2</a>&nbsp;<a href="https://www.avajava.com/tutorials/lessons/memento-pattern.html?page=2" title="Go to page 2">&gt;</a></div><br>
<hr>

<!-- start related tutorials -->
<div>
<h3>Related Tutorials:</h3>
<ul style="margin-left: 1em;">
<li>
<a title="Go to &#39;Design Patterns&#39; category" href="https://www.avajava.com/tutorials/categories/design-patterns">Design Patterns</a>


::
Behavioral Design Patterns

::
<a href="https://www.avajava.com/tutorials/lessons/template-method-pattern.html" title="This Java tutorial describes the template method pattern, a behavioral class pattern.">Template Method Pattern</a>
</li>
<li>
<a title="Go to &#39;Design Patterns&#39; category" href="https://www.avajava.com/tutorials/categories/design-patterns">Design Patterns</a>


::
Behavioral Design Patterns

::
<a href="https://www.avajava.com/tutorials/lessons/mediator-pattern.html" title="This Java tutorial describes the mediator pattern, a behavioral object pattern.">Mediator Pattern</a>
</li>
<li>
<a title="Go to &#39;Design Patterns&#39; category" href="https://www.avajava.com/tutorials/categories/design-patterns">Design Patterns</a>


::
Behavioral Design Patterns

::
<a href="https://www.avajava.com/tutorials/lessons/chain-of-responsibility-pattern.html" title="This Java tutorial describes the chain of responsibility pattern, a behavioral object pattern.">Chain of Responsibility Pattern</a>
</li>
<li>
<a title="Go to &#39;Design Patterns&#39; category" href="https://www.avajava.com/tutorials/categories/design-patterns">Design Patterns</a>


::
Behavioral Design Patterns

::
<a href="https://www.avajava.com/tutorials/lessons/observer-pattern.html" title="This Java tutorial describes the observer pattern, a behavioral object pattern.">Observer Pattern</a>
</li>
<li>
<a title="Go to &#39;Design Patterns&#39; category" href="https://www.avajava.com/tutorials/categories/design-patterns">Design Patterns</a>


::
Behavioral Design Patterns

::
<a href="https://www.avajava.com/tutorials/lessons/strategy-pattern.html" title="This Java tutorial describes the strategy pattern, a behavioral object pattern.">Strategy Pattern</a>
</li>
<li>
<a title="Go to &#39;Design Patterns&#39; category" href="https://www.avajava.com/tutorials/categories/design-patterns">Design Patterns</a>


::
Behavioral Design Patterns

::
<a href="https://www.avajava.com/tutorials/lessons/command-pattern.html" title="This Java tutorial describes the command pattern, a behavioral object pattern.">Command Pattern</a>
</li>
<li>
<a title="Go to &#39;Design Patterns&#39; category" href="https://www.avajava.com/tutorials/categories/design-patterns">Design Patterns</a>


::
Behavioral Design Patterns

::
<a href="https://www.avajava.com/tutorials/lessons/state-pattern.html" title="This Java tutorial describes the state pattern, a behavioral object pattern.">State Pattern</a>
</li>
<li>
<a title="Go to &#39;Design Patterns&#39; category" href="https://www.avajava.com/tutorials/categories/design-patterns">Design Patterns</a>


::
Behavioral Design Patterns

::
<a href="https://www.avajava.com/tutorials/lessons/visitor-pattern.html" title="This Java tutorial describes the visitor pattern, a behavioral object pattern.">Visitor Pattern</a>
</li>
<li>
<a title="Go to &#39;Design Patterns&#39; category" href="https://www.avajava.com/tutorials/categories/design-patterns">Design Patterns</a>


::
Behavioral Design Patterns

::
<a href="https://www.avajava.com/tutorials/lessons/iterator-pattern.html" title="This Java tutorial describes the iterator pattern, a behavioral object pattern.">Iterator Pattern</a>
</li>
</ul>
</div>
<!-- end related tutorials -->

<!-- Amazon Ads is off  -->
	<!-- Google Ads is off  -->
</td></tr></tbody></table>
</div>
		</div>

		<div class="clear">&nbsp;</div>		
	</div>
	<div id="bottombreadcrumb">
<div class="breadcrumbouter">
<div class="breadcrumbinner">
<a title="Go to Categories Index" href="https://www.avajava.com/tutorials/">Web Tutorials</a>
::
<a title="Go to previous category: &#39;Database&#39;" href="https://www.avajava.com/tutorials/categories/database"><img alt="Go to previous category" style="display: inline; border: 0px;" src="./Memento Pattern - Web Tutorials - avajava.com_files/previous.gif"></a>&nbsp;<a title="Go to &#39;Design Patterns&#39; category" href="https://www.avajava.com/tutorials/categories/design-patterns">Design Patterns</a>&nbsp;<a title="Go to next category: &#39;Eclipse&#39;" href="https://www.avajava.com/tutorials/categories/eclipse"><img alt="Go to next category" style="display: inline; border: 0px;" src="./Memento Pattern - Web Tutorials - avajava.com_files/next.gif"></a>


::
Behavioral Design Patterns

::
<a title="Go to previous tutorial in &#39;Design Patterns&#39; category: &#39;Iterator Pattern&#39;" href="https://www.avajava.com/tutorials/lessons/iterator-pattern.html"><img alt="Go to previous tutorial" style="display: inline; border: 0px;" src="./Memento Pattern - Web Tutorials - avajava.com_files/previous.gif"></a>&nbsp;22.
Memento Pattern&nbsp;<a title="Go to next tutorial in &#39;Design Patterns&#39; category: &#39;Singleton Pattern&#39;" href="https://www.avajava.com/tutorials/lessons/singleton-pattern.html"><img alt="Go to next tutorial" style="display: inline; border: 0px;" src="./Memento Pattern - Web Tutorials - avajava.com_files/next.gif"></a>

</div>
</div>

</div>

<div id="footer">
<p>Copyright © 2014 
Code Strategies 
		| Template: <a href="http://www.freecsstemplates.org/">Free CSS Templates</a>
		| <a href="http://www.avajava.com/contact.jsp">Contact</a>
<!-- 		| <a href="http://www.avajava.com/about.jsp" title="About">About</a> -->
		</p>
	</div>
</div>


<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script src="./Memento Pattern - Web Tutorials - avajava.com_files/ga.js.tải xuống" type="text/javascript"></script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-4759485-1");
pageTracker._initData();
pageTracker._trackPageview();
</script>



</body></html>