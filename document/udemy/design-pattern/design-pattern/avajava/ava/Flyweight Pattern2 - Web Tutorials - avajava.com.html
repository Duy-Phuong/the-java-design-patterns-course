<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- saved from url=(0071)https://www.avajava.com/tutorials/lessons/flyweight-pattern.html?page=2 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>Flyweight Pattern - Web Tutorials - avajava.com</title>
<meta name="keywords" content="Java, flyweight pattern, design pattern, structural pattern">
<meta name="description" content="This Java tutorial describes the flyweight pattern, a structural design pattern.">
<link href="./Flyweight Pattern2 - Web Tutorials - avajava.com_files/default.css" rel="stylesheet" type="text/css">
<link href="./Flyweight Pattern2 - Web Tutorials - avajava.com_files/codeformat.css" rel="stylesheet" type="text/css">
<link rel="shortcut icon" href="http://www.avajava.com/favicon.ico" type="image/vnd.microsoft.icon"> 
<link rel="icon" href="http://www.avajava.com/favicon.ico" type="image/vnd.microsoft.icon"> 
</head>
<body>
<div id="outer">
	<div id="header">
		<h1>
		<a href="https://www.avajava.com/tutorials">
		AVAJAVA Web Tutorials</a>
		</h1>
		
		<h2 id="firsth2">
			Total Categories: 24,
			Total Tutorials: 508</h2>
	
			<h2 id="secondh2">
				Design Patterns:
				9 of
				22 tutorials
				</h2>
				<h2 id="thirdh2">
				Flyweight Pattern</h2>
			</div>
	<div id="menu">
		<ul>
<!-- 
		<li class="first">"Java forwards and backwards"</li>
 --> 
<!-- 		<li><a class="toptext" href="http://www.jarvana.com/" title="Search Maven Repository">Maven Repository Search</a></li>
		<li><a class="toptext" href="http://www.jarvana.com/jarvana/doc" title="Search for Javadocs Classes and Projects">Javadoc Search</a></li> -->			

		</ul>
		<div id="search">
		Search Tutorials:
		<form style="display: inline" action="https://www.avajava.com/tutorials/search" method="get" name="searchForm">
		<input style="margin-bottom: 2px;" type="text" size="20" maxlength="50" name="q" value="">
		<input id="searchbutton" type="submit" value="  Go  ">
		</form>
		</div>
		<div class="clear"></div>
	</div>
	<div id="topbreadcrumb">
<div class="breadcrumbouter">
<div class="breadcrumbinner">
<a title="Go to Categories Index" href="https://www.avajava.com/tutorials/">Web Tutorials</a>
::
<a title="Go to previous category: &#39;Database&#39;" href="https://www.avajava.com/tutorials/categories/database"><img alt="Go to previous category" style="display: inline; border: 0px;" src="./Flyweight Pattern2 - Web Tutorials - avajava.com_files/previous.gif"></a>&nbsp;<a title="Go to &#39;Design Patterns&#39; category" href="https://www.avajava.com/tutorials/categories/design-patterns">Design Patterns</a>&nbsp;<a title="Go to next category: &#39;Eclipse&#39;" href="https://www.avajava.com/tutorials/categories/eclipse"><img alt="Go to next category" style="display: inline; border: 0px;" src="./Flyweight Pattern2 - Web Tutorials - avajava.com_files/next.gif"></a>


::
Structural Design Patterns

::
<a title="Go to previous tutorial in &#39;Design Patterns&#39; category: &#39;Proxy Pattern&#39;" href="https://www.avajava.com/tutorials/lessons/proxy-pattern.html"><img alt="Go to previous tutorial" style="display: inline; border: 0px;" src="./Flyweight Pattern2 - Web Tutorials - avajava.com_files/previous.gif"></a>&nbsp;9.
Flyweight Pattern&nbsp;<a title="Go to next tutorial in &#39;Design Patterns&#39; category: &#39;Facade Pattern&#39;" href="https://www.avajava.com/tutorials/lessons/facade-pattern.html"><img alt="Go to next tutorial" style="display: inline; border: 0px;" src="./Flyweight Pattern2 - Web Tutorials - avajava.com_files/next.gif"></a>

</div>
</div>

</div>

<div id="content">
		<div id="primaryContentContainer">
			<div id="primaryContent">
<table width="100%">
	<tbody><tr>
		<td id="sidemenu">
		<div id="sidemenucats"><strong>Tutorial Categories:</strong> <ol><li><a href="https://www.avajava.com/tutorials/categories/ajax">Ajax</a> (1)</li><li><a href="https://www.avajava.com/tutorials/categories/ant">Ant</a> (16)</li><li><a href="https://www.avajava.com/tutorials/categories/apache-web-server">Apache Web Server</a> (8)</li><li><a href="https://www.avajava.com/tutorials/categories/bioinformatics">Bioinformatics</a> (10)</li><li><a href="https://www.avajava.com/tutorials/categories/cascading-style-sheets">Cascading Style Sheets</a> (47)</li><li><a href="https://www.avajava.com/tutorials/categories/classes-and-objects">Classes and Objects</a> (14)</li><li><a href="https://www.avajava.com/tutorials/categories/database">Database</a> (13)</li><li><a class="currentcategory" href="https://www.avajava.com/tutorials/categories/design-patterns">Design Patterns</a> (22)</li><li><a href="https://www.avajava.com/tutorials/categories/eclipse">Eclipse</a> (39)</li><li><a href="https://www.avajava.com/tutorials/categories/files">Files</a> (62)</li><li><a href="https://www.avajava.com/tutorials/categories/general-java">General Java</a> (69)</li><li><a href="https://www.avajava.com/tutorials/categories/jsps">JSPs</a> (9)</li><li><a href="https://www.avajava.com/tutorials/categories/java-basics">Java Basics</a> (11)</li><li><a href="https://www.avajava.com/tutorials/categories/linux">Linux</a> (23)</li><li><a href="https://www.avajava.com/tutorials/categories/logging">Logging</a> (5)</li><li><a href="https://www.avajava.com/tutorials/categories/maven">Maven</a> (88)</li><li><a href="https://www.avajava.com/tutorials/categories/search">Search</a> (12)</li><li><a href="https://www.avajava.com/tutorials/categories/servlets">Servlets</a> (20)</li><li><a href="https://www.avajava.com/tutorials/categories/struts">Struts</a> (1)</li><li><a href="https://www.avajava.com/tutorials/categories/text">Text</a> (19)</li><li><a href="https://www.avajava.com/tutorials/categories/tomcat">Tomcat</a> (8)</li><li><a href="https://www.avajava.com/tutorials/categories/version-control">Version Control</a> (8)</li><li><a href="https://www.avajava.com/tutorials/categories/windows">Windows</a> (2)</li><li><a href="https://www.avajava.com/tutorials/categories/xml">XML</a> (1)</li></ol><!-- Google Ads is off  -->
			<!-- Amazon Ads is off  -->
			</div>
		</td>

		<td id="mainside"><!-- Google Ads is off  -->
<hr>
<div class="accentuate">
<div class="title">Flyweight Pattern</div>
<div>Author: Deron Eriksson</div>
<div class="smaller">Description: This Java tutorial describes the flyweight pattern, a structural design pattern.</div>
<div class="smaller">
Tutorial created using:
Windows Vista || JDK 1.6.0_11 || Eclipse JEE Ganymede SR1 (Eclipse 3.4.1)</div>
</div>
<hr>
<br>

<div style="font-weight: bold">Page: <a href="https://www.avajava.com/tutorials/lessons/flyweight-pattern.html?page=1" title="Go to page 1">&lt;</a> <a href="https://www.avajava.com/tutorials/lessons/flyweight-pattern.html?page=1" title="Go to page 1">1</a> 2</div><br>
<p class="continue">(Continued from page 1) </p><p>The FlyweightFactory class is our flyweight factory. It utilizes the singleton pattern so that we only have once instance of the factory, which we obtain via its static getInstance() method. The FlyweightFactory creates a hashmap pool of flyweights. If a request is made for a flyweight object and that object doesn't exist, it is created and placed in the flyweight pool. The flyweight pool of the FlyweightFactory stores all the instances of the different types of flyweights (ie, FlyweightAdder object, FlyweightMultiplier object, etc). Thus, only one instance of each type is created, and this occurs on-demand. </p>

<h3><a href="https://www.avajava.com/tutorials/design-patterns/flyweight-pattern/FlyweightFactory.java">FlyweightFactory.java</a></h3>
<pre><span class="javaKeyword">package</span> com.cakes;

<span class="javaKeyword">import</span> java.util.HashMap;
<span class="javaKeyword">import</span> java.util.Map;

<span class="javaKeyword">public</span> <span class="javaKeyword">class</span> FlyweightFactory {

	<span class="javaKeyword">private</span> <span class="javaKeyword">static</span> FlyweightFactory flyweightFactory;

	<span class="javaKeyword">private</span> Map&lt;String, Flyweight&gt; flyweightPool;

	<span class="javaKeyword">private</span> FlyweightFactory() {
		flyweightPool = <span class="javaKeyword">new</span> HashMap&lt;String, Flyweight&gt;();
	}

	<span class="javaKeyword">public</span> <span class="javaKeyword">static</span> FlyweightFactory getInstance() {
		<span class="javaKeyword">if</span> (flyweightFactory == null) {
			flyweightFactory = <span class="javaKeyword">new</span> FlyweightFactory();
		}
		<span class="javaKeyword">return</span> flyweightFactory;
	}

	<span class="javaKeyword">public</span> Flyweight getFlyweight(String key) {
		<span class="javaKeyword">if</span> (flyweightPool.containsKey(key)) {
			<span class="javaKeyword">return</span> flyweightPool.get(key);
		} <span class="javaKeyword">else</span> {
			Flyweight flyweight;
			<span class="javaKeyword">if</span> (<span class="javaString">"add"</span>.equals(key)) {
				flyweight = <span class="javaKeyword">new</span> FlyweightAdder();
			} <span class="javaKeyword">else</span> {
				flyweight = <span class="javaKeyword">new</span> FlyweightMultiplier();
			}
			flyweightPool.put(key, flyweight);
			<span class="javaKeyword">return</span> flyweight;
		}
	}

}
</pre>
<p>The FlyweightDemo class demonstrates our flyweight pattern. It obtains a FlyweightFactory object via FlyweightFactory.getInstance(). After this, in a loop, it obtains a FlyweightAdder from the FlyweightFactory and calls its doMath() operation with the current loop index as the two parameter values. Next, it does the same thing with a FlyweightMultiplier. </p>

<h3><a href="https://www.avajava.com/tutorials/design-patterns/flyweight-pattern/FlyweightDemo.java">FlyweightDemo.java</a></h3>
<pre><span class="javaKeyword">package</span> com.cakes;

<span class="javaKeyword">public</span> <span class="javaKeyword">class</span> FlyweightDemo {

	<span class="javaKeyword">public</span> <span class="javaKeyword">static</span> <span class="javaKeyword">void</span> main(String[] args) {

		FlyweightFactory flyweightFactory = FlyweightFactory.getInstance();

		<span class="javaKeyword">for</span> (<span class="javaKeyword">int</span> i = 0; i &lt; 5; i++) {
			Flyweight flyweightAdder = flyweightFactory.getFlyweight(<span class="javaString">"add"</span>);
			flyweightAdder.doMath(i, i);

			Flyweight flyweightMultiplier = flyweightFactory.getFlyweight(<span class="javaString">"multiply"</span>);
			flyweightMultiplier.doMath(i, i);
		}
	}
}
</pre>
<p>The console output of executing FlyweightDemo is shown here. </p>

<h3><a href="https://www.avajava.com/tutorials/design-patterns/flyweight-pattern/console.txt">Console Output</a></h3>
<pre>adding 0 and 0: 0
multiplying 0 and 0: 0
adding 1 and 1: 2
multiplying 1 and 1: 1
adding 2 and 2: 4
multiplying 2 and 2: 4
adding 3 and 3: 6
multiplying 3 and 3: 9
adding 4 and 4: 8
multiplying 4 and 4: 16
</pre>

<p>When executing FlyweightDemo, we see that it takes 3 seconds to create the FlyweightAdder object and the same thing happens for the FlyweightMultiplier object. After this, no more delays occur since we keep reusing the flyweight objects rather than instantiating new objects. This highlights how the flyweight pattern can be used to minimize resource requirements by avoiding unnecessary object instantiations for similar objects. </p>


<div style="font-weight: bold">Page: <a href="https://www.avajava.com/tutorials/lessons/flyweight-pattern.html?page=1" title="Go to page 1">&lt;</a> <a href="https://www.avajava.com/tutorials/lessons/flyweight-pattern.html?page=1" title="Go to page 1">1</a> 2</div><br>
<hr>

<!-- start related tutorials -->
<div>
<h3>Related Tutorials:</h3>
<ul style="margin-left: 1em;">
<li>
<a title="Go to &#39;Design Patterns&#39; category" href="https://www.avajava.com/tutorials/categories/design-patterns">Design Patterns</a>


::
Structural Design Patterns

::
<a href="https://www.avajava.com/tutorials/lessons/adapter-pattern.html" title="This Java tutorial describes the adapter pattern, a structural design pattern.">Adapter Pattern</a>
</li>
<li>
<a title="Go to &#39;Design Patterns&#39; category" href="https://www.avajava.com/tutorials/categories/design-patterns">Design Patterns</a>


::
Structural Design Patterns

::
<a href="https://www.avajava.com/tutorials/lessons/composite-pattern.html" title="This Java tutorial describes the composite pattern, a structural design pattern.">Composite Pattern</a>
</li>
<li>
<a title="Go to &#39;Design Patterns&#39; category" href="https://www.avajava.com/tutorials/categories/design-patterns">Design Patterns</a>


::
Structural Design Patterns

::
<a href="https://www.avajava.com/tutorials/lessons/proxy-pattern.html" title="This Java tutorial describes the proxy pattern, a structural design pattern.">Proxy Pattern</a>
</li>
<li>
<a title="Go to &#39;Design Patterns&#39; category" href="https://www.avajava.com/tutorials/categories/design-patterns">Design Patterns</a>


::
Structural Design Patterns

::
<a href="https://www.avajava.com/tutorials/lessons/facade-pattern.html" title="This Java tutorial describes the facade pattern, a structural design pattern.">Facade Pattern</a>
</li>
<li>
<a title="Go to &#39;Design Patterns&#39; category" href="https://www.avajava.com/tutorials/categories/design-patterns">Design Patterns</a>


::
Structural Design Patterns

::
<a href="https://www.avajava.com/tutorials/lessons/bridge-pattern.html" title="This Java tutorial describes the bridge pattern, a structural design pattern.">Bridge Pattern</a>
</li>
<li>
<a title="Go to &#39;Design Patterns&#39; category" href="https://www.avajava.com/tutorials/categories/design-patterns">Design Patterns</a>


::
Structural Design Patterns

::
<a href="https://www.avajava.com/tutorials/lessons/decorator-pattern.html" title="This Java tutorial describes the decorator pattern, a structural design pattern.">Decorator Pattern</a>
</li>
</ul>
</div>
<!-- end related tutorials -->

<!-- Amazon Ads is off  -->
	<!-- Google Ads is off  -->
</td></tr></tbody></table>
</div>
		</div>

		<div class="clear">&nbsp;</div>		
	</div>
	<div id="bottombreadcrumb">
<div class="breadcrumbouter">
<div class="breadcrumbinner">
<a title="Go to Categories Index" href="https://www.avajava.com/tutorials/">Web Tutorials</a>
::
<a title="Go to previous category: &#39;Database&#39;" href="https://www.avajava.com/tutorials/categories/database"><img alt="Go to previous category" style="display: inline; border: 0px;" src="./Flyweight Pattern2 - Web Tutorials - avajava.com_files/previous.gif"></a>&nbsp;<a title="Go to &#39;Design Patterns&#39; category" href="https://www.avajava.com/tutorials/categories/design-patterns">Design Patterns</a>&nbsp;<a title="Go to next category: &#39;Eclipse&#39;" href="https://www.avajava.com/tutorials/categories/eclipse"><img alt="Go to next category" style="display: inline; border: 0px;" src="./Flyweight Pattern2 - Web Tutorials - avajava.com_files/next.gif"></a>


::
Structural Design Patterns

::
<a title="Go to previous tutorial in &#39;Design Patterns&#39; category: &#39;Proxy Pattern&#39;" href="https://www.avajava.com/tutorials/lessons/proxy-pattern.html"><img alt="Go to previous tutorial" style="display: inline; border: 0px;" src="./Flyweight Pattern2 - Web Tutorials - avajava.com_files/previous.gif"></a>&nbsp;9.
Flyweight Pattern&nbsp;<a title="Go to next tutorial in &#39;Design Patterns&#39; category: &#39;Facade Pattern&#39;" href="https://www.avajava.com/tutorials/lessons/facade-pattern.html"><img alt="Go to next tutorial" style="display: inline; border: 0px;" src="./Flyweight Pattern2 - Web Tutorials - avajava.com_files/next.gif"></a>

</div>
</div>

</div>

<div id="footer">
<p>Copyright © 2014 
Code Strategies 
		| Template: <a href="http://www.freecsstemplates.org/">Free CSS Templates</a>
		| <a href="http://www.avajava.com/contact.jsp">Contact</a>
<!-- 		| <a href="http://www.avajava.com/about.jsp" title="About">About</a> -->
		</p>
	</div>
</div>


<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script src="./Flyweight Pattern2 - Web Tutorials - avajava.com_files/ga.js.tải xuống" type="text/javascript"></script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-4759485-1");
pageTracker._initData();
pageTracker._trackPageview();
</script>



</body></html>